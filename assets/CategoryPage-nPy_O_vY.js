import{a as m,j as e,I as p,c as P,f as I,u as _,d as G,e as z,h as J}from"./index-B8oYje2l.js";const K=({categoryLabel:n,exercises:o,onAddExercise:t,onRemoveExercise:d})=>{const[i,c]=m.useState(""),s=()=>{i.trim()&&(t(i.trim()),c(""))};return e.jsxs("div",{className:"mb-8 p-6 rounded-3xl bg-white/[0.03] border border-white/[0.05] animate-fade-in",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 text-purple-400",children:["管理",n,"动作"]}),e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsx("input",{type:"text",value:i,onChange:r=>c(r.target.value),className:"flex-1 px-4 py-3 rounded-xl bg-black/20 border border-white/10 focus:border-purple-500 outline-none transition-all text-base placeholder-white/20",placeholder:"输入新动作名称..."}),e.jsx("button",{onClick:s,disabled:!i.trim(),className:"px-6 py-3 rounded-xl bg-purple-600 text-white font-medium hover:bg-purple-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"添加"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.map(r=>e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 border border-white/10 group hover:border-white/30 transition-all",children:[e.jsx("span",{className:"text-gray-300",children:r}),e.jsx("button",{onClick:()=>d(r),className:"text-gray-600 hover:text-red-400 transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(p.X,{className:"w-4 h-4"})})]},r)),o.length===0&&e.jsx("span",{className:"text-gray-500 text-sm",children:"暂无动作，请添加"})]})]})};function W({value:n,onChange:o,options:t,placeholder:d,label:i}){const[c,s]=m.useState(!1);return e.jsxs("div",{className:"relative",children:[i&&e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wider mb-2",children:i}),e.jsxs("button",{type:"button",onClick:()=>s(!c),className:"w-full px-4 py-3 rounded-xl bg-black/20 border border-white/10 focus:border-purple-500 outline-none transition-all text-base text-left flex items-center justify-between text-white group",children:[e.jsx("span",{className:n?"text-white":"text-gray-500",children:n?t.find(r=>r.value===n)?.label||n:d||"Select..."}),e.jsx("span",{className:`text-gray-500 text-xs transition-transform duration-200 group-hover:text-white ${c?"rotate-180":""}`,children:"▼"})]}),c&&e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>s(!1)}),c&&e.jsxs("div",{className:"absolute z-20 w-full mt-2 bg-[#1a1a1a] border border-white/10 rounded-xl shadow-xl shadow-black/50 max-h-60 overflow-y-auto animate-fade-in backdrop-blur-xl",children:[t.map(r=>e.jsxs("button",{type:"button",onClick:()=>{o(r.value),s(!1)},className:`w-full px-4 py-3 text-left hover:bg-white/5 transition-colors flex items-center justify-between ${n===r.value?"text-purple-400 bg-white/[0.02]":"text-gray-300"}`,children:[e.jsx("span",{children:r.label}),n===r.value&&e.jsx("span",{className:"text-purple-500",children:"✓"})]},r.value)),t.length===0&&e.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"暂无选项"})]})]})}const V=({exercises:n,initialExercise:o="",groupedRecords:t,onSave:d,onCancel:i,onOpenExerciseManager:c})=>{const[s,r]=m.useState({exercise:o,reps:0,weight:0,weightUnit:"kg"});m.useEffect(()=>{o&&r(a=>({...a,exercise:o}))},[o]);const f=()=>{s.exercise&&s.reps&&d(s)};return e.jsxs("div",{className:"mb-10 p-6 rounded-3xl bg-white/[0.03] border border-white/[0.05]",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(W,{label:"Exercise",placeholder:"选择动作...",value:s.exercise,onChange:a=>r({...s,exercise:a}),options:n.map(a=>({value:a,label:a}))}),n.length===0&&e.jsx("p",{className:"text-xs text-red-400 mt-2 cursor-pointer",onClick:c,children:"当前无可用动作，请先点击此处或右上角设置图标添加动作。"})]}),s.exercise&&t[s.exercise]&&t[s.exercise].length>0&&e.jsxs("div",{className:"md:col-span-2 mb-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wider mb-2",children:"今日已记录组数"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t[s.exercise].map((a,x)=>e.jsxs("div",{className:"px-3 py-1.5 rounded-lg bg-white/5 border border-white/10 text-sm text-gray-300 flex items-center gap-2",children:[e.jsxs("span",{className:"text-purple-400 font-mono",children:["#",x+1]}),e.jsxs("span",{children:[a.reps," x ",a.weight,a.weightUnit||"kg"]})]},a.id))})]}),e.jsxs("div",{children:[e.jsx(W,{label:"Reps",placeholder:"0",value:s.reps||"",onChange:a=>r({...s,reps:a}),options:Array.from({length:30},(a,x)=>x+1).map(a=>({value:a,label:a.toString()}))}),e.jsx("div",{className:"flex gap-2 mt-2",children:[6,8,10,12].map(a=>e.jsx("button",{onClick:()=>r({...s,reps:a}),className:"px-3 py-1 rounded-lg bg-white/5 hover:bg-white/10 text-xs text-gray-400 hover:text-white transition-colors",children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wider mb-2",children:"Weight"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:s.weight||"",onChange:a=>r({...s,weight:parseFloat(a.target.value)||0}),className:"flex-1 px-4 py-3 rounded-xl bg-black/20 border border-white/10 focus:border-purple-500 outline-none transition-all text-base placeholder-white/20",placeholder:"0"}),e.jsxs("div",{className:"flex bg-black/20 rounded-xl border border-white/10 p-1",children:[e.jsx("button",{onClick:()=>r({...s,weightUnit:"kg"}),className:`px-3 rounded-lg text-sm font-medium transition-all ${s.weightUnit==="kg"?"bg-purple-600 text-white":"text-gray-500 hover:text-white"}`,children:"kg"}),e.jsx("button",{onClick:()=>r({...s,weightUnit:"lbs"}),className:`px-3 rounded-lg text-sm font-medium transition-all ${s.weightUnit==="lbs"?"bg-purple-600 text-white":"text-gray-500 hover:text-white"}`,children:"lbs"})]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:i,className:"px-6 py-4 rounded-xl bg-white/5 text-gray-400 font-medium hover:bg-white/10 hover:text-white transition-all",children:"取消"}),e.jsx("button",{onClick:f,disabled:!s.exercise||!s.reps,className:"flex-1 py-4 rounded-xl bg-purple-600 text-white font-medium hover:bg-purple-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-purple-900/20",children:"添加一组"})]})]})},Y=({groupedRecords:n,onEditExercise:o,onLongPressRecord:t,showAddForm:d})=>{const i=P.useRef(null),c=h=>{i.current=setTimeout(()=>{t(h)},500)},s=()=>{i.current&&(clearTimeout(i.current),i.current=null)},r=()=>{i.current&&(clearTimeout(i.current),i.current=null)},f=h=>{i.current=setTimeout(()=>{t(h)},500)},a=()=>{i.current&&(clearTimeout(i.current),i.current=null)},[x,j]=P.useState(new Set),u=h=>{const g=new Set(x);g.has(h)?g.delete(h):g.add(h),j(g)};return Object.keys(n).length===0?d?null:e.jsx("div",{className:"py-20 text-center",children:e.jsx("p",{className:"text-gray-600",children:"今日无记录"})}):e.jsx("div",{className:"space-y-6",children:Object.entries(n).map(([h,g])=>{const b=x.has(h),N=g.length>4,C=[...g].reverse(),S=N&&!b?C.slice(0,4):C;return e.jsxs("div",{className:"bg-white/[0.02] border border-white/[0.05] rounded-3xl p-6 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-xl font-bold text-white",children:h}),e.jsxs("span",{className:"text-sm text-gray-500",children:[g.length," sets"]})]}),e.jsx("div",{className:"space-y-2",children:S.map((w,R)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5 hover:bg-white/10 transition-colors group select-none active:scale-[0.98] duration-200",onTouchStart:()=>c(w),onTouchEnd:s,onTouchMove:r,onMouseDown:()=>f(w),onMouseUp:a,onMouseLeave:a,children:[e.jsxs("div",{className:"flex items-center gap-4 pointer-events-none",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsxs("span",{className:"text-gray-500 font-mono text-sm w-8",children:["#",g.length-R]}),w.time&&e.jsx("span",{className:"text-[10px] text-gray-600 font-mono",children:w.time})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-xl font-bold text-white",children:w.reps}),e.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"reps"})]}),e.jsx("span",{className:"text-gray-600",children:"×"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-lg font-medium text-purple-400",children:w.weight}),e.jsx("span",{className:"text-xs text-purple-400/70",children:w.weightUnit||"kg"})]})]}),e.jsx("div",{className:"flex items-center gap-4 pointer-events-none",children:e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("div",{className:"text-xs text-gray-600 uppercase tracking-wider",children:"Volume"}),e.jsxs("div",{className:"text-sm font-light text-gray-400",children:[(w.reps*w.weight).toLocaleString()," ",w.weightUnit||"kg"]})]})})]},w.id))}),N&&e.jsx("button",{onClick:()=>u(h),className:"w-full mt-3 py-3.5 rounded-2xl bg-white/[0.03] hover:bg-white/[0.06] active:bg-white/[0.08] border border-white/[0.05] text-sm font-medium text-gray-400 hover:text-white transition-all flex items-center justify-center gap-2 group",children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"收起记录"}),e.jsx(p.ChevronUp,{className:"w-4 h-4 opacity-70 group-hover:opacity-100 transition-opacity"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["展开剩余 ",g.length-4," 组"]}),e.jsx(p.ChevronDown,{className:"w-4 h-4 opacity-70 group-hover:opacity-100 transition-opacity"})]})}),e.jsxs("button",{onClick:()=>o(h),className:"w-full mt-4 py-3 rounded-xl border border-dashed border-white/10 hover:border-purple-500/50 hover:bg-purple-500/10 text-gray-500 hover:text-purple-300 transition-all flex items-center justify-center gap-2 group",children:[e.jsx(p.Plus,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"text-sm font-medium",children:"Add Set"})]})]},h)})})},Z=({activeCategoryConfig:n,records:o,selectedCategory:t,selectedDate:d,onDateChange:i,onBack:c,showExerciseManager:s,onToggleExerciseManager:r})=>{const f=m.useMemo(()=>{if(!t)return null;const x=new Date().toISOString().split("T")[0],j=o.filter(b=>b.category===t&&b.date<x).map(b=>b.date).sort((b,N)=>new Date(N).getTime()-new Date(b).getTime());if(j.length===0)return"首次训练";const u=j[0],h=Math.abs(new Date(x).getTime()-new Date(u).getTime());return`上次训练：${Math.ceil(h/(1e3*60*60*24))}天前 (${I(u)})`},[o,t]),a=x=>{const j=new Date(d);j.setDate(j.getDate()+x),i(j.toISOString().split("T")[0])};return e.jsxs("div",{className:"flex flex-col gap-6 mb-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:c,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors group",children:[e.jsx("div",{className:"p-2 rounded-full border border-white/10 group-hover:border-white/30 transition-colors",children:e.jsx(p.ArrowLeft,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-sm font-medium uppercase tracking-wider",children:"Back"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("div",{className:"text-3xl font-bold",children:n.label}),e.jsx("div",{className:"text-base text-purple-300 font-medium mt-1",children:f})]}),e.jsxs("div",{className:"md:hidden",children:[e.jsx("div",{className:"text-2xl font-bold text-right",children:n.label}),e.jsx("div",{className:"text-sm text-purple-300 font-medium text-right mt-1",children:f})]}),e.jsx(n.icon,{className:`w-10 h-10 ${n.color}`})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 flex items-center justify-between bg-white/[0.03] rounded-2xl p-2 border border-white/[0.05]",children:[e.jsx("button",{onClick:()=>a(-1),className:"p-3 rounded-xl hover:bg-white/5 text-gray-400 hover:text-white transition-colors",children:e.jsx(p.ChevronLeft,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative group cursor-pointer",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-medium text-white",children:I(d)}),I(d)!==d&&e.jsx("div",{className:"text-xs text-gray-500 font-mono",children:d})]}),e.jsx("input",{type:"date",value:d,onChange:x=>x.target.value&&i(x.target.value),className:"absolute inset-0 opacity-0 cursor-pointer"})]}),e.jsx("button",{onClick:()=>a(1),className:"p-3 rounded-xl hover:bg-white/5 text-gray-400 hover:text-white transition-colors",children:e.jsx(p.ChevronRight,{className:"w-5 h-5"})})]}),e.jsx("button",{onClick:r,className:`p-4 rounded-2xl border transition-all duration-300 ${s?"bg-purple-500/20 border-purple-500/50 text-purple-300":"bg-white/[0.03] border-white/[0.05] hover:bg-white/[0.06] text-gray-400 hover:text-white"}`,title:"管理动作",children:e.jsx(p.Settings,{className:"w-6 h-6"})})]})]})},Q=({exercise:n,initialValues:o,onSave:t,onClose:d,submitLabel:i=o?"Update Set":"Add Set"})=>{const[c,s]=m.useState(0),[r,f]=m.useState(0),[a,x]=m.useState("kg");m.useEffect(()=>{o&&(s(o.reps),f(o.weight),x(o.weightUnit))},[o]);const j=()=>{c>0&&t({reps:c,weight:r,weightUnit:a})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-end justify-center bg-black/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"w-full max-w-md bg-[#1c1c1e] rounded-t-3xl p-6 shadow-2xl animate-slide-up border-t border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:n}),e.jsx("button",{onClick:d,className:"p-2 rounded-full hover:bg-white/10 text-gray-400 hover:text-white transition-colors",children:e.jsx(p.X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white/5 rounded-2xl p-4 border border-white/5",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wider mb-2",children:"Reps"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s(Math.max(0,c-1)),className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors shrink-0",children:e.jsx(p.Minus,{className:"w-4 h-4"})}),e.jsx("input",{type:"number",value:c||"",onChange:u=>s(parseInt(u.target.value)||0),className:"flex-1 min-w-0 bg-transparent text-center text-2xl font-bold text-white outline-none",placeholder:"0"}),e.jsx("button",{onClick:()=>s(c+1),className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors shrink-0",children:e.jsx(p.Plus,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex justify-center gap-2 mt-3",children:[8,10,12].map(u=>e.jsx("button",{onClick:()=>s(u),className:`w-8 h-8 rounded-full text-xs font-medium transition-all ${c===u?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:u},u))})]}),e.jsxs("div",{className:"bg-white/5 rounded-2xl p-4 border border-white/5",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wider mb-2",children:"Weight"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>f(Math.max(0,r-2.5)),className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors shrink-0",children:e.jsx(p.Minus,{className:"w-4 h-4"})}),e.jsx("input",{type:"number",value:r||"",onChange:u=>f(parseFloat(u.target.value)||0),className:"flex-1 min-w-0 bg-transparent text-center text-2xl font-bold text-white outline-none",placeholder:"0"}),e.jsx("button",{onClick:()=>f(r+2.5),className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors shrink-0",children:e.jsx(p.Plus,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex justify-center mt-3",children:e.jsxs("div",{className:"relative flex bg-white/5 rounded-lg p-1 cursor-pointer",children:[e.jsx("div",{className:`absolute top-1 bottom-1 w-[calc(50%-4px)] bg-purple-600 rounded-md transition-all duration-300 ease-out ${a==="kg"?"left-1":"left-[calc(50%+0px)]"}`}),e.jsx("button",{onClick:()=>x("kg"),className:`relative z-10 px-4 py-1 text-xs font-medium transition-colors duration-300 ${a==="kg"?"text-white":"text-gray-400 hover:text-white"}`,children:"kg"}),e.jsx("button",{onClick:()=>x("lbs"),className:`relative z-10 px-4 py-1 text-xs font-medium transition-colors duration-300 ${a==="lbs"?"text-white":"text-gray-400 hover:text-white"}`,children:"lbs"})]})})]})]}),e.jsx("button",{onClick:j,disabled:c===0,className:"w-full py-4 rounded-xl bg-purple-600 text-white font-bold text-lg hover:bg-purple-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-purple-900/20",children:i}),e.jsx("div",{className:"h-6"})," "]})})},ee=({onEdit:n,onDelete:o,onClose:t})=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-end justify-center bg-black/60 backdrop-blur-sm animate-fade-in",onClick:t,children:e.jsxs("div",{className:"w-full max-w-md bg-[#1c1c1e] rounded-t-3xl p-4 shadow-2xl animate-slide-up border-t border-white/10",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:()=>{n(),t()},className:"w-full py-4 rounded-2xl bg-white/10 hover:bg-white/15 text-white font-medium text-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(p.Edit,{className:"w-5 h-5"}),"编辑"]}),e.jsxs("button",{onClick:()=>{o(),t()},className:"w-full py-4 rounded-2xl bg-red-500/10 hover:bg-red-500/20 text-red-400 font-medium text-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(p.Trash,{className:"w-5 h-5"}),"删除"]})]}),e.jsx("button",{onClick:t,className:"w-full mt-4 py-4 rounded-2xl bg-black/20 hover:bg-black/30 text-gray-400 font-medium text-lg transition-colors",children:"取消"}),e.jsx("div",{className:"h-6"})]})});function se(){const{categoryId:n}=_(),o=G(),t=z.some(l=>l.id===n)?n:null,[d,i]=m.useState(new Date().toISOString().split("T")[0]),{records:c,exercises:s,addRecord:r,deleteRecord:f,updateRecord:a,addExercise:x,removeExercise:j}=J(),[u,h]=m.useState(!1);m.useEffect(()=>{t&&(i(new Date().toISOString().split("T")[0]),b(!1),h(!1))},[t]);const[g,b]=m.useState(!1),[N,C]=m.useState(""),[S,w]=m.useState(null),[R,F]=m.useState(void 0),[M,E]=m.useState(null),[y,U]=m.useState(null),q=l=>{!l||!t||x(t,l)},B=l=>{t&&j(t,l)},$=l=>{if(!t)return;const v={id:Date.now().toString(),category:t,...l,sets:1,date:d,time:new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})};r(v)},X=l=>{f(l)},A=z.find(l=>l.id===t),H=c.filter(l=>l.category===t&&l.date===d),O=t?s[t]||[]:[],D=H.reduce((l,v)=>(l[v.exercise]||(l[v.exercise]=[]),l[v.exercise].push(v),l),{});return Object.keys(D).forEach(l=>{D[l].sort((v,k)=>parseInt(v.id)-parseInt(k.id))}),!t||!A?e.jsx("div",{className:"text-white text-center mt-20",children:"Category not found"}):e.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white font-sans selection:bg-white/20",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-[20%] -left-[10%] w-[70vw] h-[70vw] bg-purple-900/10 rounded-full blur-[120px] animate-pulse-slow"}),e.jsx("div",{className:"absolute top-[40%] -right-[10%] w-[60vw] h-[60vw] bg-blue-900/10 rounded-full blur-[120px]"})]}),e.jsx("div",{className:"relative max-w-3xl mx-auto px-6 py-12 md:py-20",children:e.jsxs("div",{className:"animate-fade-in",children:[e.jsx(Z,{activeCategoryConfig:A,records:c,selectedCategory:t,selectedDate:d,onDateChange:i,onBack:()=>{o("/")},showExerciseManager:u,onToggleExerciseManager:()=>h(!u)}),u&&e.jsx(K,{categoryLabel:A.label,exercises:O,onAddExercise:q,onRemoveExercise:B}),!g&&!u&&e.jsxs("button",{onClick:()=>{C(""),b(!0)},className:"w-full py-4 mb-8 rounded-2xl border border-dashed border-white/20 text-gray-500 hover:text-white hover:border-white/40 hover:bg-white/[0.02] transition-all duration-300 flex items-center justify-center gap-2",children:[e.jsx(p.Plus,{className:"w-5 h-5"}),e.jsx("span",{children:"添加新记录"})]}),g&&e.jsx(V,{exercises:O,initialExercise:N,groupedRecords:D,onSave:l=>{$(l),b(!1)},onCancel:()=>b(!1),onOpenExerciseManager:()=>{b(!1),h(!0)}}),e.jsx(Y,{groupedRecords:D,onEditExercise:l=>{const k=c.filter(T=>T.exercise===l).sort((T,L)=>new Date(L.date).getTime()-new Date(T.date).getTime()||parseInt(L.id)-parseInt(T.id))[0];F(k?{reps:k.reps,weight:k.weight,weightUnit:k.weightUnit}:void 0),w(l)},onLongPressRecord:l=>{E(l)},showAddForm:g}),S&&e.jsx(Q,{exercise:S,initialValues:R,submitLabel:"Add Set",onSave:l=>{$({exercise:S,...l}),w(null)},onClose:()=>w(null)}),y&&e.jsx(Q,{exercise:y.exercise,initialValues:{reps:y.reps,weight:y.weight,weightUnit:y.weightUnit},submitLabel:"Update Set",onSave:l=>{a(y.id,l),U(null)},onClose:()=>U(null)}),M&&e.jsx(ee,{onEdit:()=>{U(M),E(null)},onDelete:()=>{X(M.id),E(null)},onClose:()=>E(null)})]})})]})}export{se as default};
